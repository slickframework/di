

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Definitions: Dependency Injection Container &mdash; Dependency Injection Container v1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Dependency Injection Container v1.0.0 documentation" href="../index.html"/>
        <link rel="next" title="Container usage" href="container.html"/>
        <link rel="prev" title="Installation" href="../manual/installation.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Dependency Injection Container
          

          
          </a>

          
            
            
              <div class="version">
                v1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Definitions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#value-definition">Value definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#factory-callable-definition">Factory (callable) definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alias-definition">Alias definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#object-definition">Object definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="container.html">Container usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/contrib.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dependency Injection Container</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Definitions: Dependency Injection Container</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/slickframework/di/blob/master/doc/cookbook/definitions.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="definitions">
<h1>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h1>
<p>Definitions are entries in an array that instruct the container on how to
create the correspondent object instance or value.</p>
<p>Every container MUST have a definition list (associative array) to be
created and you SHOULD always use the <code class="docutils literal"><span class="pre">Slick\Di\ContainerBuilder</span></code> to create
your container.</p>
<p>Lets create our <code class="docutils literal"><span class="pre">dependencies.php</span></code> file that will contain our dependencies
definitions:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * Dependency injection definitions file</span>
<span class="sd"> */</span>

<span class="k">return</span> <span class="p">[</span>
    <span class="s1">&#39;timezone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;UTC&#39;</span><span class="p">,</span>
    <span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">);</span>
    <span class="p">},</span>
<span class="p">];</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Why use PHP arrays?</p>
<p class="last">This question has a very simple answer. If you use other markup/style to
create the container definitions file, for example <code class="docutils literal"><span class="pre">.ini</span></code> or <code class="docutils literal"><span class="pre">.yml</span></code>
you will need to parse those settings and then apply them.
If you use PHP arrays there is no need to parse it and the code can be
directly executed, enhancing performance.</p>
</div>
<div class="section" id="value-definition">
<h2>Value definition<a class="headerlink" href="#value-definition" title="Permalink to this headline">¶</a></h2>
<p>A value or scalar definition is used as is. The following example is a value definition:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * Dependency injection value definition example</span>
<span class="sd"> */</span>
<span class="k">return</span> <span class="p">[</span>
    <span class="s1">&#39;timezone&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;UTC&#39;</span>
<span class="p">];</span>
</pre></div>
</div>
<p>Value definitions are good to store application wide constants.</p>
</div>
<div class="section" id="factory-callable-definition">
<h2>Factory (callable) definition<a class="headerlink" href="#factory-callable-definition" title="Permalink to this headline">¶</a></h2>
<p>With factory definition you can compute and/or control the object or value creation:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * Dependency injection callable definition example</span>
<span class="sd"> */</span>
<span class="k">return</span> <span class="p">[</span>
    <span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">];</span>
</pre></div>
</div>
</div>
<div class="section" id="alias-definition">
<h2>Alias definition<a class="headerlink" href="#alias-definition" title="Permalink to this headline">¶</a></h2>
<p>Alias definition is a shortcut for another defined entry:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="sd">/**</span>
<span class="sd"> * Dependency injection alias definition example</span>
<span class="sd"> */</span>
<span class="k">return</span> <span class="p">[</span>
    <span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="o">@</span><span class="nx">general</span><span class="o">.</span><span class="nx">config</span>
<span class="p">];</span>
</pre></div>
</div>
<p>The alias points to an entry key and is always prefixed with an <code class="docutils literal"><span class="pre">&#64;</span></code></p>
</div>
<div class="section" id="object-definition">
<h2>Object definition<a class="headerlink" href="#object-definition" title="Permalink to this headline">¶</a></h2>
<p>Objects are what makes dependency containers very handy, and fun! To create an
object definition you need to use an helper
class: <code class="docutils literal"><span class="pre">Slick\Di\Definition\ObjectDefinition</span></code></p>
<p>Lets see an example:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Services\SearchService</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Slick\Configuration\Configuration</span><span class="o">:</span>
<span class="k">use</span> <span class="nx">Slick\Di\Definition\ObjectDefinition</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * Dependency injection object definition example</span>
<span class="sd"> */</span>
<span class="k">return</span> <span class="p">[</span>
    <span class="s1">&#39;siteName&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Example site&#39;</span><span class="p">,</span>
    <span class="s1">&#39;config&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Configuration</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="s1">&#39;search.service&#39;</span> <span class="o">=&gt;</span> <span class="nx">ObjectDefinition</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nx">SearchService</span><span class="o">::</span><span class="na">class</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">setConstructArgs</span><span class="p">([</span><span class="s1">&#39;@config&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">setMethod</span><span class="p">(</span><span class="s1">&#39;setMode&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;simple&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">setProperty</span><span class="p">(</span><span class="s1">&#39;siteName&#39;</span><span class="p">,</span> <span class="s1">&#39;@siteName&#39;</span><span class="p">)</span>
<span class="p">];</span>
</pre></div>
</div>
<p>You can use the alias notation to instruct container to use other entries when
creating those objects.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="container.html" class="btn btn-neutral float-right" title="Container usage" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../manual/installation.html" class="btn btn-neutral" title="Installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Slick Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'v1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>