

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">

    
    <title>Container usage: Dependency Injection Container &mdash; Dependency Injection Container v1.0.0 documentation</title>
    

    <!-- Styles -->
    <link rel="stylesheet" href="../_static/css/main.css" type="text/css" />

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet' type='text/css'>

    <!-- Favicons -->
    <link rel="icon" href="../_static/favicon.ico">

</head>


<body>
    
        <header class="site-header sticky">

    <!-- Top navbar & branding -->
    <nav class="navbar navbar-default">
        <div class="container">

            <!-- Toggle buttons and brand -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
                    <span class="glyphicon glyphicon-option-vertical"></span>
                </button>

                <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="navbar-brand" href="../index.html"><img src="../_static/img/logo.png" alt="logo"></a>
            </div>
            <!-- END Toggle buttons and brand -->

            <!-- Top navbar -->
            <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
                <ul class="nav navbar-nav navbar-right">
                    <li class="">
                        
                        
                        <a href="https://github.com/slickframework/di/blob/master/doc/cookbook/container">
                            <i class="fa fa-github"></i>
                            Edit on GitHub
                        </a>
                        
                        
                    </li>

                    <!-- li class="hero"><a href="http://themeforest.net/item/thedocs-online-documentation-template/13070884">Purchase</a></li -->
                </ul>
            </div>
            <!-- END Top navbar -->

        </div>
    </nav>
    <!-- END Top navbar & branding -->

</header>
    

    <main class="container">
        <div class="row">

            <!-- Sidebar -->
            <aside class="col-md-3 col-sm-3 sidebar">
                
<!-- ul class="sidenav dropable sticky">
    <li><a href="index.html">Overview</a></li>
    <li>
        <a class="active" href="#">Layouts</a>
        <ul>
            <li><a class="active" href="layout_boxed_left-sidebar.html">Boxed - Left sidebar</a></li>
            <li><a href="layout_boxed_right-sidebar.html">Boxed - Right sidebar</a></li>
            <li><a href="layout_boxed_no-sidebar.html">Boxed - No sidebar</a></li>
            <li><a href="layout_full_left-sidebar.html">Fullwidth - Left sidebar</a></li>
            <li><a href="layout_full_right-sidebar.html">Fullwidth - Right sidebar</a></li>
            <li><a href="layout_full_no-sidebar.html">Fullwidth - No sidebar</a></li>
            <li><a href="layout_single-page-1.html">Single page - Sample 1</a></li>
            <li><a href="layout_single-page-2.html">Single page - Sample 2</a></li>
            <li><a href="layout_single-page-3.html">Single page - Sample 3</a></li>
            <li><a href="layout_sidebar_boxed.html">Boxed sidebar</a></li>
            <li><a href="layout_skin.html">Skins</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Components</a>
        <ul>
            <li><a href="component_navbar.html">Navbar</a></li>
            <li><a href="component_banner.html">Banner</a></li>
            <li><a href="component_banner_sample1.html">Banner - Sample 1</a></li>
            <li><a href="component_banner_sample2.html">Banner - Sample 2</a></li>
            <li><a href="component_banner_sample3.html">Banner - Sample 3</a></li>
            <li><a href="component_sidebar.html">Sidebar - default</a></li>
            <li><a href="component_sidebar_line.html">Sidebar - line</a></li>
            <li><a href="component_sidebar_icon.html">Sidebar - icon</a></li>
            <li><a href="component_footer.html">Footer</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Basic styling</a>
        <ul>
            <li><a href="css_typography.html">Typography</a></li>
            <li><a href="css_button.html">Buttons</a></li>
            <li><a href="css_label.html">Labels</a></li>
            <li><a href="css_table.html">Tables</a></li>
            <li><a href="css_alert.html">Alerts</a></li>
            <li><a href="css_icon.html">Icons</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Elements</a>
        <ul>
            <li><a href="element_toc.html">Table of contents</a></li>
            <li><a href="element_code.html">Code view</a></li>
            <li><a href="element_view.html">Views</a></li>
            <li><a href="element_promo.html">Promo</a></li>
            <li><a href="element_files.html">Included files</a></li>
            <li><a href="element_requirement.html">Requirements</a></li>
            <li><a href="element_tab.html">Tabs</a></li>
            <li><a href="element_step.html">Steps</a></li>
            <li><a href="element_media.html">Media</a></li>
            <li><a href="element_color.html">Color palette</a></li>
            <li><a href="element_jumbotron.html">Jumbotron</a></li>
            <li><a href="element_carousel.html">Carousel</a></li>
            <li><a href="element_faq.html">FAQ</a></li>
            <li><a href="element_mix.html">Mix</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Menu level</a>
        <ul>
            <li><a href="#">Level 1</a></li>
            <li>
                <a href="#">Level 1</a>
                <ul>
                    <li><a href="#">Level 2</a></li>
                    <li>
                        <a href="#">Level 2</a>
                        <ul>
                            <li><a href="#">Level 3</a></li>
                            <li><a href="#">Level 3</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Level 2</a></li>
                </ul>
            </li>
            <li><a href="#">Level 1</a></li>
            <li><a href="#">Level 1</a></li>
        </ul>
    </li>

</ul -->





    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual/overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manual/overview.html#dependency-injection">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual/overview.html#dependency-injection-container">Dependency Injection Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="definitions.html">Definitions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="definitions.html#value-definition">Value definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="definitions.html#factory-callable-definition">Factory (callable) definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="definitions.html#alias-definition">Alias definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="definitions.html#object-definition">Object definition</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Container usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#constructor-injection">Constructor injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setter-injection">Setter injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#property-injection">Property injection</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual/contrib.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manual/contrib.html#pull-requests">Pull requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual/contrib.html#running-tests">Running tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual/contrib.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual/license.html">License</a></li>
</ul>




            </aside>

            <!-- Main content -->
            <article class="col-md-9 col-sm-9 main-content" role="main">
                
  <div class="section" id="container-usage">
<h1>Container usage<a class="headerlink" href="#container-usage" title="Permalink to this headline">¶</a></h1>
<p>Now that we have defined all of our dependencies its time to create a container
that will use them.</p>
<p>Even though <code class="docutils literal"><span class="pre">Container</span></code> can be instantiated as normal PHP objects do, it is
advisable to use the <code class="docutils literal"><span class="pre">ContainerBuilder</span></code> factory to do so. It translates the
definitions file into <code class="docutils literal"><span class="pre">DefinitionInterface</span></code> objects that dependency container
uses to create dependencies. It also chains all the created container so that if
you try to get an entry it will search over all containers in the chain. This
is a very handy feature if you want, for example, to create a package that you
will reuse in your applications and in that package you define a container with
default dependencies and later on your application also defines a dependency
container. Definitions can be overridden and the entries from your package
are also available in your application container.</p>
<p>Now lets create our container:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Slick\Di\ContainerBuilder</span><span class="p">;</span>

<span class="nv">$container</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nx">ContainerBuilder</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/services.php&#39;</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">getContainer</span><span class="p">();</span>
</pre></div>
</div>
<p>That&#8217;s it! We now have a new created dependency container ready to create objects
and inject their dependencies.</p>
<div class="section" id="constructor-injection">
<h2>Constructor injection<a class="headerlink" href="#constructor-injection" title="Permalink to this headline">¶</a></h2>
<p>Consider the following class:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var Engine</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$engine</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">Engine</span> <span class="nv">$engine</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span> <span class="o">=</span> <span class="nv">$engine</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now lets create a new <code class="docutils literal"><span class="pre">Car</span></code> using our dependency container:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$myCar</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">Car</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">As a rule of thumb, always use type hint in your constructor. This will make
your code more readable, bug free and easy to instantiate with the
dependency container.</p>
</div>
<p>The dependency container will look to constructor arguments and search for type
matches in the dependencies collection he holds and will inject those
dependencies on the requested object instance.</p>
</div>
<div class="section" id="setter-injection">
<h2>Setter injection<a class="headerlink" href="#setter-injection" title="Permalink to this headline">¶</a></h2>
<p>When creating objects with containers, be aware that the container will also
look for methods like <code class="docutils literal"><span class="pre">set&lt;VarName&gt;(VarType</span> <span class="pre">$var)</span></code> and if it has a matching
dependency it will use that method to inject that dependency:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var Engine</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$engine</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setEngine</span><span class="p">(</span><span class="nx">Engine</span> <span class="nv">$engine</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">engine</span> <span class="o">=</span> <span class="nv">$engine</span><span class="p">;</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>By calling the container to create your car object like:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$myCar</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">Car</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Car::$engine</span></code> will be inject using the setter method.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When creating objects with a container if you have a setter but there is no
known dependency in the container collection, it will not fail because the
container only injects dependencies that he knows of.</p>
<p class="last">In the other hand if you have dependencies on your constructor the object
creation will fail due to missing arguments.</p>
</div>
</div>
<div class="section" id="property-injection">
<h2>Property injection<a class="headerlink" href="#property-injection" title="Permalink to this headline">¶</a></h2>
<p>In property injection we will use the annotation <code class="docutils literal"><span class="pre">&#64;inject</span></code> to tell the
container what to inject:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @inject</span>
<span class="sd">     * @var Engine</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$engine</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the example above the container will use the <code class="docutils literal"><span class="pre">&#64;var</span></code> annotation to determine
the dependency to inject:</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Car</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @inject car.config</span>
<span class="sd">     * @var array</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$config</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">&#64;inject</span></code> annotation accepts an argument with the entry name that the container
should use to determine the dependency. In the above example, config array was
stored with car.config key and will be injected in <code class="docutils literal"><span class="pre">Car</span></code> creation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To skip dependency injection on methods or properties you need to set
<code class="docutils literal"><span class="pre">&#64;ignoreInject</span></code> annotation. This annotation tells dependency container to
ignore the automatic dependency injection on public properties or public
methods. This annotation does not work with constructor methods.</p>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">By using the <code class="docutils literal"><span class="pre">&#64;inject</span></code> annotation you are explicitly telling the container
to inject a dependency. If no dependency is found for the provided key or
type an exception will be thrown telling you that the container cannot
inject something you said that he has to.</p>
</div>
</div>
</div>



                
                    
                <p>&nbsp;</p>
                    <ul class="pager">
                        
                        <li class="previous">
                            <a href="definitions.html" title="Definitions" accesskey="p">Prev</a>
                        </li>
                        
                        
                        <li class="next">
                            <a title="Contributing" href="../manual/contrib.html" accesskey="n">Next</a>
                        </li>
                        
                    </ul>
                    
                    <hr/>
                
            </article>
        </div>
    </main>

    
        <footer class="site-footer">
    <div class="container">
        <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>

        <div class="row">
            <div class="col-md-6 col-sm-6">
                &copy; Copyright 2016, Slick Team<br>
                Built with <a href="http://sphinx-doc.org/">Sphinx</a>.
            </div>
            <div class="col-md-6 col-sm-6">
                <ul class="footer-menu">
                    <li><a href="https://github.com/slickframework/di/blob/master/CHANGELOG.md">Changelog</a></li>
                    <li><a href="https://github.com/slickframework/di/graphs/contributors">Credits</a></li>
                    <li><a href="mailto:">Contact us</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
    

    <!-- Scripts -->
    <script src="../_static/js/vendor/jquery.min.js"></script>
    <script src="../_static/js/vendor/bootstrap/bootstrap.min.js"></script>
    <script src="../_static/js/custom.js"></script>
    <script src="../_static/js/theDocs.all.min.js"></script>

</body>
</html>